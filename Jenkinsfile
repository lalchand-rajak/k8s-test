pipeline {

  agent any

  stages {

    stage('Checkout Source') {
      steps {
        git url:'https://github.com/lalchand-rajak/k8s-test.git', branch:'main'
      }
    }
    
    
  
    stage('Deploy Kubernetes ') {
      steps{
     kubeconfig(caCertificate: 'LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1ekNDQWMrZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJeE1EZ3hOekE1TURrME0xb1hEVE14TURneE5UQTVNRGswTTFvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBT0ZZClE5c2FBTk1saFUrbG1aa2pNWGtUamQ0U01PZFNkOFJmQlNReEF3Z25VS3pwcXNiaVJ6Um1hamVlK3R5b1FVQTgKVVE1SWNoY2xZdnduOWYxWmhIOFQ4ekxXSUpQK1dadC9FWjgxRnBIU2JIMnF0VXU0Wm9WNnU5T0Z6YWFNUkdtMQpWUUdDcEJTcWdHNDUyb0toUFVVZ0NzeXBPdTdpeit4Q21vZDk4Zk1zSitBSU5GT2pISVFnYTQxbjZnZXg0Q0pFCnAvRkFCK3d0ZjZkZ3dpMzh2QXdmU1VNYlNicmdXOWpjZW03UG5uYXVqUGNyMjlHazJpTjdKUkpQVjVBcVlqdUgKbDJ0eGFEYkNkR0g1SndXTGpaUVgvcWltTzBmblJURWxjaFV3c1FNRGVtWC9nbVVNNDV6VG9pVk9rYTZuemFhZwpwcmphbFJRRkoyNGpsaVcrZHRjQ0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZBc1hjYVNEcm9mKzZ5eTFJMngxR255aFJmM1NNQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElCQVFEUVFmWGtyUEplcGYvVkdGWStJOHBuNEhDOFNPYThqRlBWT1ozR2NxYkEwK0d6ODBlQQpaVjlFbU9LZTRWZkVDdlBqUHNTRndPMUFHYk1sY283bDVsWTd6U0Z6cmkrb3kxK2VVOEpjVG82OUp6U2NhVEJwCkF0YnVJNHhTKytsMXhmdTE2eXJxNVRncnRJc0I5T09UWlAxUDZGamRxVEVLYVVIQ3R3TnFwMXpQUGhIYU1heDMKUHd3YXIvWFdiSzcwUGRMWUZpWXZiN0puWGlTbCtLU3VtZTlIbmU3UWVWbVpZTEtuVmluNWJvZFoxenFHMDFnMwo3b1UzTzI1SzFlWkd5ZEliUEM3RTVMM25SeTVpQW5mbXpkdGlhMndFKyt6emkyVlBoYzl1NnJuYTkzQzMvWEFzCmNiSEc2UGxXejFxa0tiTG45V2s5a3dsUFQ3blNvVmYrQnVrMAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==', credentialsId: 'k8s', serverUrl: 'https://10.210.0.133:6443') {
    // some block
    sh ' kubectl apply -f nginx.yml '

}
   
      }
     
    }
  }
}
